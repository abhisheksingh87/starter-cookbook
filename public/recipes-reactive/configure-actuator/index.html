<!doctype html><html><head><title>WellsFargo Application Modernization Cookbook</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=revised content="2021-01-07T12:35:52 CST"><title>2. Configure Actuators :: WellsFargo Application Modernization Cookbook</title><link rel="shortcut icon" href=/images/favicon.png type=image/x-icon><link href=/css/nucleus.css rel=stylesheet><link href=/css/font-awesome.min.css rel=stylesheet><link href=/css/hybrid.css rel=stylesheet><link href=/css/featherlight.min.css rel=stylesheet><link href=/css/auto-complete.css rel=stylesheet><link href=/theme-original/style.css rel=stylesheet><link rel=stylesheet href=/css/bootstrap.min.css><script src=/js/jquery-2.x.min.js></script><style type=text/css>:root #header+#content>#left>#rlblock_left{display:none!important}</style><link href=/css/custom.css rel=stylesheet><script language=javascript src=/js/localforage.nopromises.min.js></script></head><body data-url=/recipes-reactive/configure-actuator/><div id=headermain></div><nav id=sidebar><div class=highlightable><div id=header-wrapper><div id=header><p><figure><a href=/><img src=/images/wellsfargo.png></a></figure>Application Starter Cookbook</p></div><div class=searchbox><label for=search-by><i class="fa fa-search"></i></label><input data-search-input id=search-by type=text placeholder=Search...>
<span data-search-clear><i class="fa fa-close"></i></span></div><script type=text/javascript src=/js/lunr.min.js></script><script type=text/javascript src=/js/auto-complete.js></script><script type=text/javascript>var baseurl="\/";</script><script type=text/javascript src=/js/search.js></script></div><ul class=topics><li data-nav-id=/common/ class="dd-item haschildren"><div><a href=/common/><i class="fa fa-spinner fa-pulse fa-1x fa-fw"></i>&nbsp;&nbsp;Let's get started</a><i class="fa fa-angle-right fa-lg category-icon"></i></div><ul><li data-nav-id=/common/create-app-using-starter/ class=dd-item><div><a href=/common/create-app-using-starter/>1. Create barebone microservice using the starter</a></div></li></ul></li><li data-nav-id=/recipes-non-reactive/ class="dd-item haschildren"><div><a href=/recipes-non-reactive/><i class="fa fa-cutlery"></i>&nbsp;&nbsp;Non-Reactive Recipes</a><i class="fa fa-angle-right fa-lg category-icon"></i></div><ul><li data-nav-id=/recipes-non-reactive/configure-actuator/ class=dd-item><div><a href=/recipes-non-reactive/configure-actuator/>2. Configure Actuators</a></div></li><li data-nav-id=/recipes-non-reactive/configure-oracle/ class=dd-item><div><a href=/recipes-non-reactive/configure-oracle/>3. Configure Oracle</a></div></li><li data-nav-id=/recipes-non-reactive/configure-mongodb/ class=dd-item><div><a href=/recipes-non-reactive/configure-mongodb/>4. Configure MongoDB</a></div></li><li data-nav-id=/recipes-non-reactive/accessing-data-mongodb/ class=dd-item><div><a href=/recipes-non-reactive/accessing-data-mongodb/>5. Access Data in MongoDB</a></div></li></ul></li><li data-nav-id=/recipes-reactive/ class="dd-item parent haschildren"><div><a href=/recipes-reactive/><i class="fa fa-cutlery"></i>&nbsp;&nbsp;Reactive Recipes</a>
<i class="fa fa-angle-down fa-lg category-icon"></i></div><ul><li data-nav-id=/recipes-reactive/spring-webflux-webclient/ class=dd-item><div><a href=/recipes-reactive/spring-webflux-webclient/>10.Spring WebFlux WebClient</a></div></li><li data-nav-id=/recipes-reactive/configure-actuator/ class="dd-item active"><div><a href=/recipes-reactive/configure-actuator/>2. Configure Actuators</a></div></li><li data-nav-id=/recipes-reactive/configure-mongodb/ class=dd-item><div><a href=/recipes-reactive/configure-mongodb/>3. Configure MongoDB</a></div></li><li data-nav-id=/recipes-reactive/accessing-data-mongodb-reactive/ class=dd-item><div><a href=/recipes-reactive/accessing-data-mongodb-reactive/>4. Access Data in MongoDB</a></div></li><li data-nav-id=/recipes-reactive/why-reactive-and-when-to-use/ class=dd-item><div><a href=/recipes-reactive/why-reactive-and-when-to-use/>5. Why Reactive</a></div></li><li data-nav-id=/recipes-reactive/spring-webflux-rx-api/ class=dd-item><div><a href=/recipes-reactive/spring-webflux-rx-api/>6. Spring WebFlux lite reactive api</a></div></li><li data-nav-id=/recipes-reactive/spring-webflux-annotated-controllers/ class=dd-item><div><a href=/recipes-reactive/spring-webflux-annotated-controllers/>7. Spring WebFlux Annotated Controllers</a></div></li><li data-nav-id=/recipes-reactive/spring-webflux-functional-endpoints/ class=dd-item><div><a href=/recipes-reactive/spring-webflux-functional-endpoints/>8. Spring WebFlux Functional Endpoints</a></div></li><li data-nav-id=/recipes-reactive/spring-webflux-exception-handling/ class=dd-item><div><a href=/recipes-reactive/spring-webflux-exception-handling/>9. Spring WebFlux Exception Handling</a></div></li></ul></li><li data-nav-id=/best-practices/ class="dd-item haschildren"><div><a href=/best-practices/><i class="fa fa-book fa-fw"></i>&nbsp;&nbsp;Best Practices</a><i class="fa fa-angle-right fa-lg category-icon"></i></div><ul><li data-nav-id=/best-practices/custom-spring-validation/ class=dd-item><div><a href=/best-practices/custom-spring-validation/>Custom Spring Bean Validation</a></div></li><li data-nav-id=/best-practices/git-commit-messages/ class=dd-item><div><a href=/best-practices/git-commit-messages/>Git Commit Best Practices</a></div></li><li data-nav-id=/best-practices/spring-boot-structure/ class=dd-item><div><a href=/best-practices/spring-boot-structure/>Organize codebase</a></div></li></ul></li><section id=shortcuts><li role><h5>&nbsp;</h5><a href=/tags/ rel=noopener><i class="fa fa-tag"></i>&nbsp;&nbsp;All Tags</a></li></section><hr><li></li></ul><section id=footer></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fa fa-bars"></i></a></span><span id=toc-menu><i class="fa fa-list-alt"></i></span><span class=links><a href=/>Home</a> > <a href=/recipes-reactive/>Reactive Recipes</a> > 2. Configure Actuators</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#context>CONTEXT</a></li><li><a href=#solution>SOLUTION</a></li><li><a href=#actuator-basics>Actuator Basics</a></li><li><a href=#actuators>Actuators</a></li><li><a href=#setup>Setup:</a></li><li><a href=#configuring-actuators>Configuring Actuators</a></li><li><a href=#predefined-endpoints>Predefined Endpoints</a></li><li><a href=#hypermedia-for-actuator-endpoints>Hypermedia for Actuator Endpoints</a></li><li><a href=#enable-http-endpoints>Enable Http Endpoints</a></li><li><a href=#enable-all-jmx-endpoints>Enable All JMX Endpoints</a></li><li><a href=#enable-actuators-based-on-profiles>Enable Actuators based on Profiles:</a></li></ul></nav></div></div></div><div id=tags><a class="label label-default" href=/tags/application-development>application development</a>
<a class="label label-default" href=/tags/spring>Spring</a>
<a class="label label-default" href=/tags/spring-boot>Spring Boot</a>
<a class="label label-default" href=/tags/actuator>actuator</a>
<a class="label label-default" href=/tags/endpoint>endpoint</a>
<a class="label label-default" href=/tags/health>health</a>
<a class="label label-default" href=/tags/health-check>health check</a></div><br><div id=body-inner><h1>2. Configure Actuators</h1><h2 id=context>CONTEXT</h2><p>The Spring Boot Actuator provides production-ready features for our Spring Boot application.
Actuators can be useful for providing diagnostics, information, metrics, and controls on your Spring Boot application running in dev,
production, on-prem, or the cloud. It is highly recommended including and enabling Actuators if you are writing a Spring Boot application.</p><h2 id=solution>SOLUTION</h2><h2 id=actuator-basics>Actuator Basics</h2><h2 id=actuators>Actuators</h2><p>In essence, Actuator brings production-ready features to our application. It monitors app, gather metrics, determines the state of Database and much more.
The main benefit of this library is that we can get production-grade tools without having to actually implement these features ourselves.
Actuator is mainly used to expose <strong>operational information</strong> about the application: <strong>health</strong>, <strong>metrics</strong>, <strong>info</strong>, <strong>dump</strong>, <strong>env</strong>, etc.
It uses <strong>Http</strong> endpoints or <strong>JMX</strong> beans to expose information.</p><h2 id=setup>Setup:</h2><ol><li><p>Add below dependency to build.gradle.</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-groovy data-lang=groovy>   <span style=color:#002070;font-weight:700>implementation:</span> <span style=color:#4070a0>&#39;org.springframework.boot:spring-boot-starter-actuator&#39;</span>
</code></pre></div></li></ol><h2 id=configuring-actuators>Configuring Actuators</h2><ol><li>Spring Boot 2.x onwards <strong>Actuator comes with most endpoints disabled</strong>. The only two endpoints available
by default are <em>/health</em> and <em>/info</em>.</li><li>By Default, All Actuator endpoints are now placed under <em>/actuator</em> path</li></ol><h2 id=predefined-endpoints>Predefined Endpoints</h2><ol><li>Please find below details of actuator endpoints.<table><thead><tr><th style=text-align:left>Endpoint</th><th style=text-align:left>Details</th></tr></thead><tbody><tr><td style=text-align:left>/health</td><td style=text-align:left>Shows application health information.</td></tr><tr><td style=text-align:left>/info</td><td style=text-align:left>Shows general information. It might be custom data, build information or details about the latest commit</td></tr><tr><td style=text-align:left>/env</td><td style=text-align:left>Shows current environment properties.</td></tr><tr><td style=text-align:left>/configprops</td><td style=text-align:left>Allows to fetch all @ConfigurationProperties beans.</td></tr><tr><td style=text-align:left>/heapdump</td><td style=text-align:left>Builds and Returns a heap dump from the JVM used by the application.</td></tr><tr><td style=text-align:left>/metrics</td><td style=text-align:left>Shows ‘metrics’ information for the current application..</td></tr><tr><td style=text-align:left>/threaddump</td><td style=text-align:left>Performs a thread dump.</td></tr><tr><td style=text-align:left>/conditions</td><td style=text-align:left>Shows the conditions that were evaluated on configuration and auto-configuration classes and the reason why they did or did not match.</td></tr><tr><td style=text-align:left>/beans</td><td style=text-align:left>Displays a complete list of all the Spring beans in the application.</td></tr><tr><td style=text-align:left>/auditevents</td><td style=text-align:left>Exposes audit events information for the current application. Requires an <strong>AuditEventRepository</strong> bean.</td></tr></tbody></table></li></ol><h2 id=hypermedia-for-actuator-endpoints>Hypermedia for Actuator Endpoints</h2><ol><li><p>Spring boot adds a discovery endpoint that returns links to all available actuator endpoints. This facilitates
discovering actuator endpoints and their corresponding URLs.</p></li><li><p>By default, this discovery endpoint is accessible through the <em>/actuator</em> endpoint.</p></li></ol><h2 id=enable-http-endpoints>Enable Http Endpoints</h2><p>All <strong>web</strong> actuator endpoints can be enabled by adding property in <strong>application.yml</strong> or <strong>application.properties</strong>:</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>management</span>:<span style=color:#bbb>
</span><span style=color:#bbb>       </span><span style=color:#062873;font-weight:700>endpoints</span>:<span style=color:#bbb>
</span><span style=color:#bbb>         </span><span style=color:#062873;font-weight:700>web</span>:<span style=color:#bbb>
</span><span style=color:#bbb>           </span><span style=color:#062873;font-weight:700>exposure</span>:<span style=color:#bbb>
</span><span style=color:#bbb>             </span><span style=color:#062873;font-weight:700>include</span>:<span style=color:#bbb> </span>*<span style=color:#bbb>
</span></code></pre></div><p>If you want to enable specific <strong>web</strong> endpoints you can enable them in <strong>application.yml</strong> or <strong>application.properties</strong>:</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>management</span>:<span style=color:#bbb>
</span><span style=color:#bbb>       </span><span style=color:#062873;font-weight:700>endpoints</span>:<span style=color:#bbb>
</span><span style=color:#bbb>         </span><span style=color:#062873;font-weight:700>web</span>:<span style=color:#bbb>
</span><span style=color:#bbb>           </span><span style=color:#062873;font-weight:700>exposure</span>:<span style=color:#bbb>
</span><span style=color:#bbb>             </span><span style=color:#062873;font-weight:700>include</span>:<span style=color:#bbb> </span>health,info,env,metrics<span style=color:#bbb>
</span></code></pre></div><p>By default, <em>/health</em> endpoint only shows below:</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json> {
 <span style=color:#062873;font-weight:700>&#34;status&#34;</span>: <span style=color:#4070a0>&#34;UP&#34;</span>
 }   
</code></pre></div><p>you can enable <em>show-details</em> management health property in <strong>application.yml</strong> to provide detailed status of the application:</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>management</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>endpoint</span>:<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#062873;font-weight:700>health</span>:<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:#062873;font-weight:700>show-details</span>:<span style=color:#bbb> </span>always<span style=color:#bbb>
</span></code></pre></div><p>you can also disable all <strong>web</strong> endpoints in <strong>application.yml</strong>:</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>management</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#062873;font-weight:700>endpoints</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>enabled-by-default</span>:<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>false</span><span style=color:#bbb>
</span></code></pre></div><h2 id=enable-all-jmx-endpoints>Enable All JMX Endpoints</h2><p>Java Management Extensions (JMX) provide a standard mechanism to monitor and manage applications.
By default, Spring Boot exposes management endpoints as JMX MBeans under the org.springframework.boot domain.
you can customize the <strong>JMX</strong> domain under which endpoints are exposed using below</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>management</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#062873;font-weight:700>endpoints</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>jmx</span>:<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#062873;font-weight:700>domain</span>:<span style=color:#bbb> </span>com.wellsfargo.cto.eai <span style=color:#bbb>
</span></code></pre></div><p>All <strong>JMX</strong> actuator endpoints can be enabled by adding property in <strong>application.yml</strong> or <strong>application.properties</strong>:</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>management</span>:<span style=color:#bbb>
</span><span style=color:#bbb>       </span><span style=color:#062873;font-weight:700>endpoints</span>:<span style=color:#bbb>
</span><span style=color:#bbb>         </span><span style=color:#062873;font-weight:700>jmx</span>:<span style=color:#bbb>
</span><span style=color:#bbb>           </span><span style=color:#062873;font-weight:700>exposure</span>:<span style=color:#bbb>
</span><span style=color:#bbb>             </span><span style=color:#062873;font-weight:700>include</span>:<span style=color:#bbb> </span>*<span style=color:#bbb>
</span></code></pre></div><p>If you want to enable specific <strong>JMX</strong> endpoints you can enable them in <strong>application.yml</strong> or <strong>application.properties</strong>:</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>management</span>:<span style=color:#bbb>
</span><span style=color:#bbb>       </span><span style=color:#062873;font-weight:700>endpoints</span>:<span style=color:#bbb>
</span><span style=color:#bbb>         </span><span style=color:#062873;font-weight:700>jmx</span>:<span style=color:#bbb>
</span><span style=color:#bbb>           </span><span style=color:#062873;font-weight:700>exposure</span>:<span style=color:#bbb>
</span><span style=color:#bbb>             </span><span style=color:#062873;font-weight:700>include</span>:<span style=color:#bbb> </span>health,info,env,metrics<span style=color:#bbb>
</span></code></pre></div><p>All <strong>JMX</strong> endpoints can be disabled by:</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#bbb>   </span><span style=color:#062873;font-weight:700>endpoints</span>:<span style=color:#bbb>
</span><span style=color:#bbb>     </span><span style=color:#062873;font-weight:700>default</span>:<span style=color:#bbb>
</span><span style=color:#bbb>       </span><span style=color:#062873;font-weight:700>jmx</span>:<span style=color:#bbb>
</span><span style=color:#bbb>         </span><span style=color:#062873;font-weight:700>enabled</span>:<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>false</span><span style=color:#bbb>
</span></code></pre></div><h2 id=enable-actuators-based-on-profiles>Enable Actuators based on Profiles:</h2><ol><li><p>Spring profiles provide a way to segregate parts of your application configuration and make it only available in
certain environments. We can utilize spring profiles to enable to disable endpoints based on environments.</p></li><li><p>By using <code>spring.profiles.active=local</code> Spring will look for a file <strong>application-local.yml</strong> and will try to load
configurations. We can specify the management endpoints that we need for development/production by following this approach.</p></li></ol><aside class=admonition><div class="admonition-content last-updated"><p class=alignleft><a href=/recipes-reactive/configure-actuator/ class="hide-child link primary-color">2. Configure Actuators</a> was last updated on December 17, 2020</p></div></aside><footer class=footline></footer><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js></script><script src=/js/featherlight.min.js></script><script src=/js/html5shiv-printshiv.min.js></script><script src=/js/modernizr.custom.71422.js></script><script src=/js/docdock.js></script><script src=/theme-original/script.js></script></body></html>