<!doctype html><html><head><title>WellsFargo Application Modernization Cookbook</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=revised content="2021-01-07T12:50:22 CST"><title>5. Why Reactive :: WellsFargo Application Modernization Cookbook</title><link rel="shortcut icon" href=/images/favicon.png type=image/x-icon><link href=/css/nucleus.css rel=stylesheet><link href=/css/font-awesome.min.css rel=stylesheet><link href=/css/hybrid.css rel=stylesheet><link href=/css/featherlight.min.css rel=stylesheet><link href=/css/auto-complete.css rel=stylesheet><link href=/theme-original/style.css rel=stylesheet><link rel=stylesheet href=/css/bootstrap.min.css><script src=/js/jquery-2.x.min.js></script><style type=text/css>:root #header+#content>#left>#rlblock_left{display:none!important}</style><link href=/css/custom.css rel=stylesheet><script language=javascript src=/js/localforage.nopromises.min.js></script></head><body data-url=/recipes-reactive/why-reactive-and-when-to-use/><div id=headermain></div><nav id=sidebar><div class=highlightable><div id=header-wrapper><div id=header><p><figure><a href=/><img src=/images/wellsfargo.png></a></figure>Application Starter Cookbook</p></div><div class=searchbox><label for=search-by><i class="fa fa-search"></i></label><input data-search-input id=search-by type=text placeholder=Search...>
<span data-search-clear><i class="fa fa-close"></i></span></div><script type=text/javascript src=/js/lunr.min.js></script><script type=text/javascript src=/js/auto-complete.js></script><script type=text/javascript>var baseurl="\/";</script><script type=text/javascript src=/js/search.js></script></div><ul class=topics><li data-nav-id=/common/ class="dd-item haschildren"><div><a href=/common/><i class="fa fa-spinner fa-pulse fa-1x fa-fw"></i>&nbsp;&nbsp;Let's get started</a><i class="fa fa-angle-right fa-lg category-icon"></i></div><ul><li data-nav-id=/common/create-app-using-starter/ class=dd-item><div><a href=/common/create-app-using-starter/>1. Create barebone microservice using the starter</a></div></li></ul></li><li data-nav-id=/recipes-non-reactive/ class="dd-item haschildren"><div><a href=/recipes-non-reactive/><i class="fa fa-cutlery"></i>&nbsp;&nbsp;Non-Reactive Recipes</a><i class="fa fa-angle-right fa-lg category-icon"></i></div><ul><li data-nav-id=/recipes-non-reactive/configure-actuator/ class=dd-item><div><a href=/recipes-non-reactive/configure-actuator/>2. Configure Actuators</a></div></li><li data-nav-id=/recipes-non-reactive/configure-oracle/ class=dd-item><div><a href=/recipes-non-reactive/configure-oracle/>3. Configure Oracle</a></div></li><li data-nav-id=/recipes-non-reactive/configure-mongodb/ class=dd-item><div><a href=/recipes-non-reactive/configure-mongodb/>4. Configure MongoDB</a></div></li><li data-nav-id=/recipes-non-reactive/accessing-data-mongodb/ class=dd-item><div><a href=/recipes-non-reactive/accessing-data-mongodb/>5. Access Data in MongoDB</a></div></li></ul></li><li data-nav-id=/recipes-reactive/ class="dd-item parent haschildren"><div><a href=/recipes-reactive/><i class="fa fa-cutlery"></i>&nbsp;&nbsp;Reactive Recipes</a>
<i class="fa fa-angle-down fa-lg category-icon"></i></div><ul><li data-nav-id=/recipes-reactive/spring-webflux-webclient/ class=dd-item><div><a href=/recipes-reactive/spring-webflux-webclient/>10.Spring WebFlux WebClient</a></div></li><li data-nav-id=/recipes-reactive/configure-actuator/ class=dd-item><div><a href=/recipes-reactive/configure-actuator/>2. Configure Actuators</a></div></li><li data-nav-id=/recipes-reactive/configure-mongodb/ class=dd-item><div><a href=/recipes-reactive/configure-mongodb/>3. Configure MongoDB</a></div></li><li data-nav-id=/recipes-reactive/accessing-data-mongodb-reactive/ class=dd-item><div><a href=/recipes-reactive/accessing-data-mongodb-reactive/>4. Access Data in MongoDB</a></div></li><li data-nav-id=/recipes-reactive/why-reactive-and-when-to-use/ class="dd-item active"><div><a href=/recipes-reactive/why-reactive-and-when-to-use/>5. Why Reactive</a></div></li><li data-nav-id=/recipes-reactive/spring-webflux-rx-api/ class=dd-item><div><a href=/recipes-reactive/spring-webflux-rx-api/>6. Spring WebFlux lite reactive api</a></div></li><li data-nav-id=/recipes-reactive/spring-webflux-annotated-controllers/ class=dd-item><div><a href=/recipes-reactive/spring-webflux-annotated-controllers/>7. Spring WebFlux Annotated Controllers</a></div></li><li data-nav-id=/recipes-reactive/spring-webflux-functional-endpoints/ class=dd-item><div><a href=/recipes-reactive/spring-webflux-functional-endpoints/>8. Spring WebFlux Functional Endpoints</a></div></li><li data-nav-id=/recipes-reactive/spring-webflux-exception-handling/ class=dd-item><div><a href=/recipes-reactive/spring-webflux-exception-handling/>9. Spring WebFlux Exception Handling</a></div></li></ul></li><li data-nav-id=/best-practices/ class="dd-item haschildren"><div><a href=/best-practices/><i class="fa fa-book fa-fw"></i>&nbsp;&nbsp;Best Practices</a><i class="fa fa-angle-right fa-lg category-icon"></i></div><ul><li data-nav-id=/best-practices/custom-spring-validation/ class=dd-item><div><a href=/best-practices/custom-spring-validation/>Custom Spring Bean Validation</a></div></li><li data-nav-id=/best-practices/git-commit-messages/ class=dd-item><div><a href=/best-practices/git-commit-messages/>Git Commit Best Practices</a></div></li><li data-nav-id=/best-practices/spring-boot-structure/ class=dd-item><div><a href=/best-practices/spring-boot-structure/>Organize codebase</a></div></li></ul></li><section id=shortcuts><li role><h5>&nbsp;</h5><a href=/tags/ rel=noopener><i class="fa fa-tag"></i>&nbsp;&nbsp;All Tags</a></li></section><hr><li></li></ul><section id=footer></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fa fa-bars"></i></a></span><span id=toc-menu><i class="fa fa-list-alt"></i></span><span class=links><a href=/>Home</a> > <a href=/recipes-reactive/>Reactive Recipes</a> > 5. Why Reactive</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#context>CONTEXT</a></li><li><a href=#what-is-reactive-programming>What is Reactive Programming</a></li><li><a href=#why-reactive>Why Reactive</a></li><li><a href=#message-driven-communication>Message-Driven Communication</a></li><li><a href=#project-reactor>Project Reactor</a></li><li><a href=#reactive-microservices-with-spring-boot>Reactive Microservices with Spring Boot</a></li><li><a href=#mvc-vs-webflux>MVC vs WebFlux</a></li><li><a href=#performance>Performance</a><ul><li><a href=#performance-300-concurrent-users>Performance: 300 concurrent users</a></li><li><a href=#performance-3000-concurrent-users>Performance: 3000 concurrent users</a></li></ul></li><li><a href=#when-use-cases>When: Use Cases</a><ul><li></li></ul></li></ul></nav></div></div></div><div id=tags><a class="label label-default" href=/tags/reactive>reactive</a>
<a class="label label-default" href=/tags/spring>spring</a>
<a class="label label-default" href=/tags/reactor>reactor</a>
<a class="label label-default" href=/tags/spring-webflux>spring webflux</a></div><br><div id=body-inner><h1>5. Why Reactive</h1><h2 id=context>CONTEXT</h2><p>This recipe provides the context of Why Reactive Programming and Use cases</p><h2 id=what-is-reactive-programming>What is Reactive Programming</h2><p>Reactive Programming is a new paradigm in which you use declarative code (in a manner that is similar to functional programming)
in order to build asynchronous processing pipelines. It is an event-based model where data is pushed to the consumer, as it becomes available: we deal with asynchronous sequences of events</p><p>Reactive code is assembled around asynchronous functional chains, where inputs are streamed (propagated) through these chains from the producer to the subscribers.</p><h2 id=why-reactive>Why Reactive</h2><p>Before we plunge into technical aspects of Reactive Systems and architectures, we should know &ldquo;Why build Reactive Systems&rdquo;?
Let&rsquo;s say that our system should:</p><ul><li><p>Responsive to interactions with its users.</p></li><li><p>Handle failure and remain available during outages.</p></li><li><p>Strive under varying load conditions.</p></li><li><p>Be able to send, receive, and route messages in varying network conditions.</p><p>These answers actually convey the core reactive traits as defined in the <a href=https://www.reactivemanifesto.org/>reactive-manifesto</a>
<img src=/images/reactivemanifesto.PNG alt></p></li></ul><p>So how should an application be responsive? One of the first ways to achieve responsiveness is through <strong>elasticity</strong>. This
describes the ability to stay responsive under a varying workload, meaning the throughput of the system should increase
automatically when more users start using it and it should decrease automatically when the demand goes down. From the
application perspective, this feature enables system responsiveness because any point in time the system can be expanded
without affecting average <strong>latency</strong>. The acceptance criteria for the system are the ability to stay responsive under failures, or, in other words, to be resilient.
This may be achieved by applying isolation between functional components of the system, thereby isolating all internal failures and enabling independence</p><p>Another point to emphasize is that elasticity and resilience are tightly coupled, and we achieve a truly responsive system only by enabling both. With scalability, we can have multiple replicas of the component so that, if one fails, we can detect this, minimize its impact on the rest of the system, and switch to another replica.</p><ul><li><a href=https://www.reactivemanifesto.org/glossary#Elasticity>Elasticity</a></li><li><a href=https://www.reactivemanifesto.org/glossary#Failure>Failure</a></li><li><a href=https://www.reactivemanifesto.org/glossary#Isolation>Isolation</a></li><li><a href=https://www.reactivemanifesto.org/glossary#Component>Component</a></li></ul><h2 id=message-driven-communication>Message-Driven Communication</h2><p>One of the widely asked question is how to connect components in the distributed system and preserve decoupling, isolation, and scalability at the same time.
Let&rsquo;s deep dive into below code</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>   <span style=color:#555;font-weight:700>@RequestMapping</span><span style=color:#666>(</span><span style=color:#4070a0>&#34;/resource&#34;</span><span style=color:#666>)</span>                                       <span style=color:#60a0b0;font-style:italic>// (1)
</span><span style=color:#60a0b0;font-style:italic></span>   <span style=color:#007020;font-weight:700>public</span> Object <span style=color:#06287e>processRequest</span><span style=color:#666>()</span> <span style=color:#666>{</span>
       RestTemplate template <span style=color:#666>=</span> <span style=color:#007020;font-weight:700>new</span> RestTemplate<span style=color:#666>();</span>                    <span style=color:#60a0b0;font-style:italic>// (2)
</span><span style=color:#60a0b0;font-style:italic></span>   
       ExamplesCollection result <span style=color:#666>=</span> template<span style=color:#666>.</span><span style=color:#4070a0>getForObject</span><span style=color:#666>(</span>             <span style=color:#60a0b0;font-style:italic>// (3) 
</span><span style=color:#60a0b0;font-style:italic></span>          <span style=color:#4070a0>&#34;http://abc.com/api/resource2&#34;</span><span style=color:#666>,</span>                              
          ExamplesCollection<span style=color:#666>.</span><span style=color:#4070a0>class</span>                                    
       <span style=color:#666>);</span>                                                             
       processResultFurther<span style=color:#666>(</span>result<span style=color:#666>);</span>                                  <span style=color:#60a0b0;font-style:italic>// (4)
</span><span style=color:#60a0b0;font-style:italic></span>   <span style=color:#666>}</span>
</code></pre></div><p>In the preceding example, we have defined the request handler which will be invoked on users' requests.
In turn, each invocation of the handler produces an additional HTTP call to an external service and then subsequently executes another processing stage.
Despite the fact that the preceding code may look familiar and transparent in terms of logic, it has some flaws.
To understand what is wrong in this example, let&rsquo;s take an overview of the following request&rsquo;s timeline:
<img src=/images/blocking-thread.PNG alt></p><p>only a small part of the processing time is allocated for effective CPU usage whereas the rest of the time thread is being blocked by the I/O and cannot be used for handling other requests.
Java world, we have thread pools, which may allocate additional threads to increase parallel processing.
However, under a high load, such a technique may be extremely inefficient to process the new I/O task simultaneously. So,
So to achieve better resource utilization in I/O cases, we should use an <strong>asynchronous</strong> and <strong>non-blocking</strong> interaction model.
In real life, this kind of communication is <strong>messaging</strong>.
<img src=/images/NonBlocking.png alt></p><h2 id=project-reactor>Project Reactor</h2><p>Project Reactor is a fully non-blocking foundation with back-pressure support included.
It’s the foundation of the reactive stack in the Spring ecosystem and is featured in projects such as Spring WebFlux, Spring Data, and Spring Cloud Gateway.</p><h2 id=reactive-microservices-with-spring-boot>Reactive Microservices with Spring Boot</h2><p>The Spring portfolio provides two parallel stacks. One is based on a Servlet API with Spring MVC and Spring Data constructs.
The other is a fully reactive stack that takes advantage of Spring WebFlux and Spring Data’s reactive repositories.
In both cases, Spring Security has you covered with native support for both stacks.
<img src=/images/Reactive-Spring.png alt></p><h2 id=mvc-vs-webflux>MVC vs WebFlux</h2><table><thead><tr><th style=text-align:left></th><th style=text-align:left>MVC</th><th style=text-align:left>WebFlux</th></tr></thead><tbody><tr><td style=text-align:left><strong>Scaling</strong></td><td style=text-align:left>Multithreading</td><td style=text-align:left>Event Loop</td></tr><tr><td style=text-align:left><strong>Default Server</strong></td><td style=text-align:left>Tomcat</td><td style=text-align:left>Netty</td></tr><tr><td style=text-align:left><strong>Responses</strong></td><td style=text-align:left>List, Object, ResponseEntity</td><td style=text-align:left>Flux, Mono</td></tr><tr><td style=text-align:left><strong>Routing</strong></td><td style=text-align:left><strong>Annotational</strong> @Controller, @RequestMapping, @Controller, @RequestMapping, @GetMapping, etc.</td><td style=text-align:left><strong>Annotational</strong> @Controller, @RequestMapping, @GetMapping, etc. <strong>Functional</strong> Router+Handler</td></tr></tbody></table><h2 id=performance>Performance</h2><p>The performance statistics below is between spring boot 2 webflux vs spring boot 1. The applications used along with scripts are available <a href=https://github.com/Tanzu-Solutions-Engineering/pace-cnd-java/tree/master/boot2-load-demo/applications>here</a></p><h3 id=performance-300-concurrent-users>Performance: 300 concurrent users</h3><table><thead><tr><th style=text-align:left></th><th style=text-align:left>Synchronous</th><th style=text-align:left>Asynchronous</th></tr></thead><tbody><tr><td style=text-align:left><strong>Minimum Response Time</strong></td><td style=text-align:left>302ms</td><td style=text-align:left>301ms</td></tr><tr><td style=text-align:left><strong>Maximum Response Time Server</strong></td><td style=text-align:left>317ms</td><td style=text-align:left>323ms</td></tr><tr><td style=text-align:left><strong>Mean Response Time</strong></td><td style=text-align:left>306ms</td><td style=text-align:left>305ms</td></tr><tr><td style=text-align:left><strong>Mean Requests/Second</strong></td><td style=text-align:left>102.273</td><td style=text-align:left>103.448</td></tr></tbody></table><h3 id=performance-3000-concurrent-users>Performance: 3000 concurrent users</h3><table><thead><tr><th style=text-align:left></th><th style=text-align:left>Synchronous</th><th style=text-align:left>Asynchronous</th></tr></thead><tbody><tr><td style=text-align:left><strong>Minimum Response Time</strong></td><td style=text-align:left>302ms</td><td style=text-align:left>301ms</td></tr><tr><td style=text-align:left><strong>Maximum Response Time Server</strong></td><td style=text-align:left>3734ms</td><td style=text-align:left>769ms</td></tr><tr><td style=text-align:left><strong>Mean Response Time</strong></td><td style=text-align:left>2506ms</td><td style=text-align:left>313ms</td></tr><tr><td style=text-align:left><strong>Mean Requests/Second</strong></td><td style=text-align:left>596.026</td><td style=text-align:left>1011.236</td></tr></tbody></table><h2 id=when-use-cases>When: Use Cases</h2><h4 id=when-you-may-not-want-to-use-reactive>When you may not want to Use Reactive</h4><ul><li>An app requires a significant amount of rework from Traditional MVC.</li><li>Your app is a traditional CRUD-style app.</li><li>You have a relational DB, but no reactive driver or abstraction .</li><li>App has low concurrency (&lt; 1,000 concurrent users).</li><li>Using an older version of Servlet (3.1+ is required).</li><li>Your data sources are <strong>blocking</strong> on I/O and do not scale.</li><li>You depend on ORM features like caching, lazy loading, write-behind.</li></ul><h4 id=when-you-may-want-to-use-reactive>When you may want to use Reactive</h4><ul><li><p>Relational Database with reactive driver or R2DBC abstraction (MS SQL, Postgres).</p></li><li><p>Non-relational reactive DB (Mongo, Cassandra, Redis).</p></li><li><p>Application with more than 1000 concurrent users.</p><ul><li>Web/Mobile apps.</li><li>Remote apps requiring data refresh(ex- backpressure).</li></ul></li><li><p>A large number of transaction-processing services.</p></li><li><p>Notification services.</p><blockquote><p>A banking example of application around Reactive principles could be online car shopping and financing.
Customers can browse million cars from over thousand&rsquo;s of dealers and pre-qualify for financing in seconds, without impacting credit scores.</p></blockquote></li></ul><aside class=admonition><div class="admonition-content last-updated"><p class=alignleft><a href=/recipes-reactive/why-reactive-and-when-to-use/ class="hide-child link primary-color">5. Why Reactive</a> was last updated on January 7, 2021</p></div></aside><footer class=footline></footer><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js></script><script src=/js/featherlight.min.js></script><script src=/js/html5shiv-printshiv.min.js></script><script src=/js/modernizr.custom.71422.js></script><script src=/js/docdock.js></script><script src=/theme-original/script.js></script></body></html>