<!doctype html><html><head><title>WellsFargo Application Modernization Cookbook</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=revised content="2020-12-15T10:50:46 CST"><title>Configure Oracle :: WellsFargo Application Modernization Cookbook</title><link rel="shortcut icon" href=/images/favicon.png type=image/x-icon><link href=/css/nucleus.css rel=stylesheet><link href=/css/font-awesome.min.css rel=stylesheet><link href=/css/hybrid.css rel=stylesheet><link href=/css/featherlight.min.css rel=stylesheet><link href=/css/auto-complete.css rel=stylesheet><link href=/theme-original/style.css rel=stylesheet><link rel=stylesheet href=/css/bootstrap.min.css><script src=/js/jquery-2.x.min.js></script><style type=text/css>:root #header+#content>#left>#rlblock_left{display:none!important}</style><link href=/css/custom.css rel=stylesheet><script language=javascript src=/js/localforage.nopromises.min.js></script></head><body data-url=/recipes-non-reactive/configure-oracle/><div id=headermain></div><nav id=sidebar><div class=highlightable><div id=header-wrapper><div id=header><p><figure><a href=/><img src=/images/wellsfargo.png></a></figure>Application Starter Cookbook</p></div><div class=searchbox><label for=search-by><i class="fa fa-search"></i></label><input data-search-input id=search-by type=text placeholder=Search...>
<span data-search-clear><i class="fa fa-close"></i></span></div><script type=text/javascript src=/js/lunr.min.js></script><script type=text/javascript src=/js/auto-complete.js></script><script type=text/javascript>var baseurl="\/";</script><script type=text/javascript src=/js/search.js></script></div><ul class=topics><li data-nav-id=/common/ class="dd-item haschildren"><div><a href=/common/><i class="fa fa-spinner fa-pulse fa-1x fa-fw"></i>&nbsp;&nbsp;Let's get started</a><i class="fa fa-angle-right fa-lg category-icon"></i></div><ul><li data-nav-id=/common/create-app-using-starter/ class=dd-item><div><a href=/common/create-app-using-starter/>Create microservice using the starter</a></div></li></ul></li><li data-nav-id=/recipes-non-reactive/ class="dd-item parent haschildren"><div><a href=/recipes-non-reactive/><i class="fa fa-cutlery"></i>&nbsp;&nbsp;Non-Reactive Recipes</a>
<i class="fa fa-angle-down fa-lg category-icon"></i></div><ul><li data-nav-id=/recipes-non-reactive/configure-oracle/ class="dd-item active"><div><a href=/recipes-non-reactive/configure-oracle/>Configure Oracle</a></div></li><li data-nav-id=/recipes-non-reactive/configure-redis-cache/ class=dd-item><div><a href=/recipes-non-reactive/configure-redis-cache/>Configure Redis Cache</a></div></li></ul></li><li data-nav-id=/recipes-reactive/ class=dd-item><div><a href=/recipes-reactive/><i class="fa fa-cutlery"></i>&nbsp;&nbsp;Reactive Recipes</a></div></li><li data-nav-id=/best-practices/ class="dd-item haschildren"><div><a href=/best-practices/><i class="fa fa-book fa-fw"></i>&nbsp;&nbsp;Best Practices</a><i class="fa fa-angle-right fa-lg category-icon"></i></div><ul><li data-nav-id=/best-practices/custom-spring-validation/ class=dd-item><div><a href=/best-practices/custom-spring-validation/>Custom Spring Bean Validation</a></div></li><li data-nav-id=/best-practices/spring-boot-structure/ class=dd-item><div><a href=/best-practices/spring-boot-structure/>Structuring Spring Boot</a></div></li></ul></li><section id=shortcuts><li role><h5>&nbsp;</h5><a href=/tags/ rel=noopener><i class="fa fa-tag"></i>&nbsp;&nbsp;All Tags</a></li></section><hr><li></li></ul><section id=footer></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fa fa-bars"></i></a></span><span id=toc-menu><i class="fa fa-list-alt"></i></span><span class=links><a href=/>Home</a> > <a href=/recipes-non-reactive/>Non-Reactive Recipes</a> > Configure Oracle</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#context>Context</a><ul><li><a href=#prerequisite>Prerequisite</a></li></ul></li><li><a href=#solution>Solution</a><ul><li><a href=#validation>Validation</a></li></ul></li><li><a href=#next-step>Next Step</a></li><li><a href=#notes-and-references>Notes and References</a><ul><li><a href=#anti-patterns>Anti Patterns</a></li></ul></li></ul></nav></div></div></div><div id=tags><a class="label label-default" href=/tags/persistence>persistence</a>
<a class="label label-default" href=/tags/hikari>hikari</a>
<a class="label label-default" href=/tags/database-connection-pool>database connection pool</a>
<a class="label label-default" href=/tags/anti-patterns>anti patterns</a></div><br><div id=body-inner><h1>Configure Oracle</h1><h2 id=context>Context</h2><p>This recipe is part of a cookbook for developing a modern <em>cloud ready</em> microservice using the <strong>greenfield-app-starter</strong>. This recipe deals with configuring persistence in the microservice.<br>The <code>HikariDatasource</code> bean with preconfigured connection pool is used to fulfill persistence needs in the microservice.</p><h3 id=prerequisite>Prerequisite</h3><ul><li><strong>STEP 1: CREATE APPLICATION USING THE STARTER</strong> is completed.</li></ul><h2 id=solution>Solution</h2><ol><li><p>Determine and record the following <strong>oracle database connection details</strong></p><table><thead><tr><th style=text-align:left>Property</th><th style=text-align:left>Details</th></tr></thead><tbody><tr><td style=text-align:left>jdbc url</td><td style=text-align:left><code>jdbc:oracle:thin:@&lt;host>:&lt;port>:&lt;schema></code> [thin] OR <code>jdbc:oracle:oci:@&lt;host>:&lt;port>:&lt;schema></code> [oci]</td></tr><tr><td style=text-align:left>driver classname</td><td style=text-align:left><code>oracle.jdbc.OracleDriver</code></td></tr><tr><td style=text-align:left>schema</td><td style=text-align:left>database schema name</td></tr><tr><td style=text-align:left>dialect</td><td style=text-align:left>Hibernate dialect based on the Oracle database version <code>org.hibernate.dialect.Oracle12cDialect</code></td></tr><tr><td style=text-align:left>username</td><td style=text-align:left>schema username</td></tr><tr><td style=text-align:left>password</td><td style=text-align:left>schema password</td></tr></tbody></table></li><li><p>Determine and record the <strong>database connection pool requirements</strong> for the new microservice</p><table><thead><tr><th style=text-align:left>Property</th><th style=text-align:left>Suggested Values</th></tr></thead><tbody><tr><td style=text-align:left>maximumPoolSize</td><td style=text-align:left>10</td></tr><tr><td style=text-align:left>idlePoolSize</td><td style=text-align:left>2</td></tr><tr><td style=text-align:left>connectionTimeout</td><td style=text-align:left>250ms</td></tr><tr><td style=text-align:left>idleTimeout</td><td style=text-align:left>800ms</td></tr><tr><td style=text-align:left>maxLifetime</td><td style=text-align:left>3000ms</td></tr></tbody></table></li><li><p>Navigate to the <code>&lt;microservice></code> directory</p></li><li><p>Update the <em>database connection</em> and <em>connection pool requirements</em> in <code>src/main/resources/application.yml</code></p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=color:#bbb>   </span><span style=color:#062873;font-weight:700>application</span>:<span style=color:#bbb>
</span><span style=color:#bbb>     </span><span style=color:#062873;font-weight:700>name</span>:<span style=color:#bbb>
</span><span style=color:#bbb>     </span><span style=color:#062873;font-weight:700>description</span>:<span style=color:#bbb>
</span><span style=color:#bbb>     </span><span style=color:#062873;font-weight:700>id</span>:<span style=color:#bbb> </span>&lt;wells fargo distributed-id&gt;<span style=color:#bbb>
</span><span style=color:#bbb>     </span><span style=color:#062873;font-weight:700>persistence</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>oracle</span>:<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#062873;font-weight:700>name</span>:<span style=color:#bbb> </span>&lt;user friendly database name&gt;<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:#062873;font-weight:700>url</span>:<span style=color:#bbb> </span>&lt;jdbc url format&gt;<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:#062873;font-weight:700>username</span>:<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:#062873;font-weight:700>password</span>:<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:#062873;font-weight:700>schema</span>:<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:#062873;font-weight:700>dialect</span>:<span style=color:#bbb> </span>&lt;hibernate oracle dialect&gt;<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:#062873;font-weight:700>connection-pool</span>:<span style=color:#bbb>
</span><span style=color:#bbb>              </span><span style=color:#062873;font-weight:700>maximumPoolSize</span>:<span style=color:#bbb> </span>&lt;less than 10&gt;<span style=color:#bbb>
</span><span style=color:#bbb>              </span><span style=color:#062873;font-weight:700>connectionTimeout</span>:<span style=color:#bbb> </span>&lt;in millisecs&gt;<span style=color:#bbb>
</span><span style=color:#bbb>              </span><span style=color:#062873;font-weight:700>idleTimeout</span>:<span style=color:#bbb> </span>&lt;in millisecs&gt;<span style=color:#bbb>
</span><span style=color:#bbb>              </span><span style=color:#062873;font-weight:700>maxLifetime</span>:<span style=color:#bbb> </span>&lt;in millisecs&gt;<span style=color:#bbb>
</span></code></pre></div></li></ol><h3 id=validation>Validation</h3><ol><li><p>Open a command window in the <code>&lt;microservice-name></code> directory</p></li><li><p>Validate the new microservice can be built locally: <code>gradlew bootJar</code></p></li><li><p>Validate the new microservice runs locally: <code>gradlew bootRun</code></p></li><li><p>Verify microservice health and info in the browser</p><ul><li><p><code>http://localhost:8080/actuator/info</code></p></li><li><p><code>http://localhost:8080/actuator/health</code><br>the <em>datasource details</em> and <em>uptime status</em> should be displayed in the browser.</p></li><li><p><code>http://localhost:8080/actuator/beans</code><br>search for <em>HikariDataSource</em> in the browser.</p></li></ul></li></ol><h2 id=next-step>Next Step</h2><p>Configure the Cache</p><h2 id=notes-and-references>Notes and References</h2><ul><li><a href=https://github.com/pbelathur/spring-boot-performance-analysis>https://github.com/pbelathur/spring-boot-performance-analysis</a></li></ul><h3 id=anti-patterns>Anti Patterns</h3><ol><li>Oversizing the <code>maximumPoolSize</code></li><li>Having too many <em>idle</em> connections</li><li>Setting high <code>maxLifetime</code></li></ol><aside class=admonition><div class="admonition-content last-updated"><p class=alignleft><a href=/recipes-non-reactive/configure-oracle/ class="hide-child link primary-color">Configure Oracle</a> was last updated on December 14, 2020</p></div></aside><footer class=footline></footer><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js></script><script src=/js/featherlight.min.js></script><script src=/js/html5shiv-printshiv.min.js></script><script src=/js/modernizr.custom.71422.js></script><script src=/js/docdock.js></script><script src=/theme-original/script.js></script></body></html>